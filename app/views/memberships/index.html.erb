<div class="page-header">
  <h2>Membership for <%= @project.name %></h2>
</div>

<ol class="breadcrumb">
  <li><%= link_to "Projects", projects_path %></li>
  <li><%= link_to @project.name, project_path(@project) %></li>
  <li class="active">Memberships</li>
</ol>

<div class="well form-inline col-sm-6">
  <%= form_for [@project, @membership] do |f| %>
  <div class="form-group">
    <%= f.label :user_id %>
    <em>
      <%= f.collection_select(:user_id, User.all, :id, :first_name,{include_blank:"Please select a user"},{class: "form-control"}) %>
    </em>
  </div>

  <div class="form-group">
    <%= f.select :role, ["member", "owner"],{}, {class: "form-control"} %>
  </div>

  <div class="form-group">
    <%= f.submit class: "btn btn-primary" %>
  </div>
  <% end %>
</div>


<table class="table">
    <br>
    <% @project.users.each do |u| %>
      <% u.memberships.where(project_id: @project.id).each do |m| %>
        <%= form_for [@project, m] do |f| %>
        <tr><td class="col-sm-2"><%= link_to "#{u.first_name} #{u.last_name}",project_membership_path(@project, m) %></td>
          <td class="col-sm-2"><%= f.select :role, ["member", "owner"],{},{class: "form-control"} %></td>
          <td class="col-sm-2"><%= f.submit class: "btn btn-primary" %></td></tr>
        <% end %>
      <% end %>
    <% end %>

  </table>
